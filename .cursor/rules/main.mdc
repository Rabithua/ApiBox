---
description: ApiBox 项目开发规则 - 新接口添加时的文档同步指南
globs:
alwaysApply: true
---

## 新接口添加后的文档同步检查清单

当添加新的 API 接口时，必须同步更新以下位置的文档和代码：

### 1. API 文档更新 (必须)

- 📝 **文件**: `docs/API.md`
- 🎯 **位置**: 接口列表表格
- ✅ **操作**: 在表格中添加新接口的行，包含：
  - 接口路径
  - HTTP 方法
  - 功能描述
  - 使用示例

### 3. 路由处理器服务信息 (必须)

- 📝 **文件**: `src/routes/index.ts`
- 🎯 **位置 1**: `handleRequest()` 函数中的根路径响应 (约 40-55 行)
- ✅ **操作 1**: 在 `endpoints` 对象中添加新接口路径
- 🎯 **位置 2**: 404 错误处理的可用端点信息 (约 76-90 行)
- ✅ **操作 2**: 更新 `available_endpoints` 和 `examples` 对象

### 4. 类型定义检查 (如需要)

- 📝 **文件**: `src/types/index.ts`
- ✅ **操作**: 如果新接口涉及新的数据类型，需要添加相应的 TypeScript 类型定义

### 5. 路由注册 (必须)

- 📝 **文件**: `src/routes/index.ts`
- 🎯 **位置**: `handleRequest()` 函数的路由判断部分
- ✅ **操作**: 添加新的路由匹配逻辑和处理器调用

## 检查提示

- ⚠️ **重要**: 添加新接口后，请确保所有上述位置都已同步更新
- 🧪 **测试**: 启动服务后访问根路径 `/` 确认接口信息正确显示
- 📋 **文档**: 确保 API 文档中的示例 URL 可以正常访问
