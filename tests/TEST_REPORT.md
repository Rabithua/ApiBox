# ApiBox æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•è¦†ç›–èŒƒå›´

### âœ… å·²å®Œæˆçš„æµ‹è¯•æ¨¡å—

#### 1. å·¥å…·å‡½æ•°æµ‹è¯• (`tests/unit/utils_helpers_test.ts`)

- **æµ‹è¯•æ•°é‡**: 12 ä¸ª
- **è¦†ç›–åŠŸèƒ½**:
  - CORS å¤´è®¾ç½®
  - JSON å“åº”åˆ›å»º
  - é”™è¯¯å“åº”åˆ›å»º
  - è·¯å¾„å‚æ•°è§£æ
  - å¥åº·çŠ¶æ€æ£€æŸ¥
  - æ—¥å¿—åŠŸèƒ½
- **çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

#### 2. ç¯å¢ƒå˜é‡ç®¡ç†å™¨æµ‹è¯• (`tests/unit/env_manager_test.ts`)

- **æµ‹è¯•æ•°é‡**: 9 ä¸ª
- **è¦†ç›–åŠŸèƒ½**:
  - å•ä¾‹æ¨¡å¼
  - ç¯å¢ƒå˜é‡åŠ è½½
  - é…ç½®éªŒè¯
  - æ•æ„Ÿä¿¡æ¯éšè—
- **çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

#### 3. é…ç½®ç®¡ç†å™¨æµ‹è¯• (`tests/unit/config_manager_test.ts`)

- **æµ‹è¯•æ•°é‡**: 11 ä¸ª
- **è¦†ç›–åŠŸèƒ½**:
  - å•ä¾‹æ¨¡å¼
  - API é…ç½®åŠ è½½
  - ç¯å¢ƒå˜é‡æ›¿æ¢
  - é…ç½®éªŒè¯
  - ç«¯ç‚¹ç®¡ç†
- **çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

#### 4. ç¼“å­˜ç®¡ç†å™¨æµ‹è¯• (`tests/unit/cache_manager_test.ts`)

- **æµ‹è¯•æ•°é‡**: 12 ä¸ª
- **è¦†ç›–åŠŸèƒ½**:
  - å•ä¾‹æ¨¡å¼
  - ç¼“å­˜è®¾ç½®/è·å–
  - TTL è¿‡æœŸå¤„ç†
  - ç¼“å­˜æ¸…ç†
  - ç»Ÿè®¡ä¿¡æ¯
  - ç¼“å­˜é”®ç”Ÿæˆ
- **çŠ¶æ€**: âœ… å…¨éƒ¨é€šè¿‡

### ğŸ“ å¾…å®Œæˆçš„æµ‹è¯•æ¨¡å—

#### 5. ä»£ç†å¼•æ“æµ‹è¯• (`src/proxy/engine.ts`)

- **è®¡åˆ’æµ‹è¯•**:
  - HTTP è¯·æ±‚ä»£ç†
  - è®¤è¯å¤„ç†
  - é”™è¯¯å¤„ç†
  - è¯·æ±‚é‡è¯•
  - å“åº”å¤„ç†

#### 6. è·¯ç”±å¤„ç†å™¨æµ‹è¯• (`src/routes/handler.ts`)

- **è®¡åˆ’æµ‹è¯•**:
  - è·¯ç”±åŒ¹é…
  - è¯·æ±‚å¤„ç†
  - é”™è¯¯å¤„ç†
  - CORS å¤„ç†
  - API ä»£ç†

#### 7. é›†æˆæµ‹è¯• (`tests/integration/`)

- **è®¡åˆ’æµ‹è¯•**:
  - ç«¯åˆ°ç«¯ API ä»£ç†æµç¨‹
  - å®Œæ•´è¯·æ±‚-å“åº”å‘¨æœŸ
  - å¤š API é›†æˆ
  - ç¼“å­˜é›†æˆ
  - é”™è¯¯åœºæ™¯

## æµ‹è¯•ç»Ÿè®¡

### å½“å‰çŠ¶æ€

- **æ€»æµ‹è¯•æ•°**: 44 ä¸ª
- **é€šè¿‡ç‡**: 100%
- **å¤±è´¥æ•°**: 0 ä¸ª
- **è·³è¿‡æ•°**: 0 ä¸ª

### æµ‹è¯•é…ç½®

- **æµ‹è¯•è¿è¡Œå™¨**: Deno Test
- **æƒé™è¦æ±‚**: `--allow-read --allow-env --allow-net`
- **ä¾èµ–åº“**: `@std/assert@1`

### æµ‹è¯•æ–‡ä»¶ç»“æ„

```
tests/
â”œâ”€â”€ unit/                 # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ utils_helpers_test.ts     âœ…
â”‚   â”œâ”€â”€ env_manager_test.ts       âœ…
â”‚   â”œâ”€â”€ config_manager_test.ts    âœ…
â”‚   â””â”€â”€ cache_manager_test.ts     âœ…
â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯• (å¾…å®Œæˆ)
â”œâ”€â”€ fixtures/            # æµ‹è¯•æ•°æ®
â”‚   â””â”€â”€ test_apis.json
â””â”€â”€ debug_config.ts      # è°ƒè¯•å·¥å…·
```

## è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•

```bash
deno test tests/unit/ --allow-read --allow-env --allow-net
```

### è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶

```bash
deno test tests/unit/utils_helpers_test.ts --allow-read --allow-env
deno test tests/unit/env_manager_test.ts --allow-read --allow-env
deno test tests/unit/config_manager_test.ts --allow-read --allow-env
deno test tests/unit/cache_manager_test.ts --allow-read --allow-env
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆä½¿ç”¨é¡¹ç›®é…ç½®ï¼‰

```bash
deno task test
```

## æµ‹è¯•è´¨é‡

### æµ‹è¯•è¦†ç›–çš„æ ¸å¿ƒåŠŸèƒ½

- âœ… ç¯å¢ƒå˜é‡ç®¡ç†
- âœ… é…ç½®æ–‡ä»¶åŠ è½½å’Œå¤„ç†
- âœ… ç¼“å­˜æœºåˆ¶
- âœ… å·¥å…·å‡½æ•°
- âœ… é”™è¯¯å¤„ç†
- âœ… å•ä¾‹æ¨¡å¼
- âœ… æ•°æ®éªŒè¯

### æµ‹è¯•ç‰¹ç‚¹

- **éš”ç¦»æ€§**: æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œï¼Œä¸ç›¸äº’å½±å“
- **å¯é‡å¤æ€§**: æµ‹è¯•ç»“æœä¸€è‡´å¯é‡å¤
- **ç¯å¢ƒæ¸…ç†**: æµ‹è¯•å‰åæ­£ç¡®æ¢å¤ç¯å¢ƒçŠ¶æ€
- **è¾¹ç•Œæµ‹è¯•**: è¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸åœºæ™¯
- **æ€§èƒ½æµ‹è¯•**: åŒ…å« TTL è¿‡æœŸç­‰æ—¶é—´ç›¸å…³æµ‹è¯•

## ä¸‹ä¸€æ­¥è®¡åˆ’

1. **å®Œæˆä»£ç†å¼•æ“æµ‹è¯•** - æµ‹è¯• HTTP è¯·æ±‚ä»£ç†åŠŸèƒ½
2. **å®Œæˆè·¯ç”±å¤„ç†å™¨æµ‹è¯•** - æµ‹è¯• HTTP è·¯ç”±å’Œè¯·æ±‚å¤„ç†
3. **æ·»åŠ é›†æˆæµ‹è¯•** - æµ‹è¯•å®Œæ•´çš„ç«¯åˆ°ç«¯æµç¨‹
4. **æ€§èƒ½æµ‹è¯•** - æµ‹è¯•é«˜å¹¶å‘å’Œå¤§é‡è¯·æ±‚åœºæ™¯
5. **è¦†ç›–ç‡åˆ†æ** - åˆ†æä»£ç æµ‹è¯•è¦†ç›–ç‡
6. **æ–‡æ¡£æ›´æ–°** - æ›´æ–° API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

---

**ç”Ÿæˆæ—¶é—´**: ${new Date().toISOString()}
**æµ‹è¯•ç¯å¢ƒ**: Deno ${Deno.version.deno}
